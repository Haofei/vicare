@node bitvectors
@chapter Bitvectors


@cindex Library @library{vicare containers bitvectors}
@cindex @library{vicare containers bitvectors}, library


The library @library{vicare containers bitvectors} implements vectors of
bits.

@menu
* bitvectors type::             Record type of bitvectors.
* bitvectors bits::             Bitwise operations on bitvectors.
* bitvectors conv::             Conversion operations on bitvectors.
* bitvectors comp::             Comparison operations on bitvectors.
* bitvectors ops::              Other operations on bitvectors.
@end menu

@c page
@node bitvectors type
@section Record type of bitvectors


The following bindings are exported by the library @library{vicare containers
bitvectors}.


@deftp {Record Type} @aclass{bitvector}
Name of object--type representing bitvectors.
@end deftp


@defop Constructor @aclass{bitvector} constructor @{@var{length} <non-negative-exact-integer>@}
Build and return a new @class{bitvector} object capable of holding
@var{length} bits.  The bits are initialised to zero.
@end defop


@defop {Maker syntax} @aclass{bitvector} @aclass{bitvector} (@meta{length})
Build and return a new @class{bitvector} using the default constructor.
@end defop

@c ------------------------------------------------------------

@defcv {Immutable field} @aclass{bitvector} length
The number of bits.
@end defcv

@c ------------------------------------------------------------

@defop {Setter syntax} @aclass{bitvector} set! (@meta{bitvector} (@meta{index})) @meta{bool}
Set the bit at @meta{index} in the @class{bitvector} @meta{bitvector} to
one if @meta{bool} is true, or to zero if @meta{bool} is false.
@end defop


@defop {Getter syntax} @aclass{bitvector} @meta{bitvector} (@meta{index})
Return a boolean representing the bit at @meta{index} in the
@class{bitvector} @meta{bitvector}.
@end defop

@c page
@node bitvectors bits
@section Bitwise operations on bitvectors


The following bindings are exported by the library @library{vicare containers
bitvectors}.


@defmethod @aclass{bitvector} set-all!
@defmethodx @aclass{bitvector} clear-all!
Set all the bits to true or to false.
@end defmethod


@defmethod @aclass{bitvector} toggle! @var{index}
Invert the bit at @var{index}.
@end defmethod


@defmethod @aclass{bitvector} not
Apply the bitwise NOT to the instance and return a new @class{bitvector}
object holding the result.
@end defmethod


@defmethod @aclass{bitvector} not!
Mutate this instance by applying the bitwise NOT operation and storing
the result in the instance itself.  The return value is the instance
object itself.
@end defmethod


@deftypemethod @aclass{bitvector} @aclass{bitvector} and (@var{B} @aclass{bitvector})
@deftypemethodx @aclass{bitvector} @aclass{bitvector} ior (@var{B} @aclass{bitvector})
@deftypemethodx @aclass{bitvector} @aclass{bitvector} xor (@var{B} @aclass{bitvector})
Apply the bitwise AND, inclusive OR or exclusive OR to the instance and
@var{B}, then return a new @class{bitvector} object representing the
result.  @var{B} must have the same length of the instance.
@end deftypemethod


@deftypemethod @aclass{bitvector} @aclass{bitvector} and! (@var{B} @aclass{bitvector})
@deftypemethodx @aclass{bitvector} @aclass{bitvector} ior! (@var{B} @aclass{bitvector})
@deftypemethodx @aclass{bitvector} @aclass{bitvector} xor! (@var{B} @aclass{bitvector})
Mutate this instance by applying the bitwise AND, inclusive OR or
exclusive OR to the instance and @var{B} and storing the result in the
instance itself.  @var{B} must have the same length of the instance.
@end deftypemethod


@defmethod @aclass{bitvector} bit-count
Return an exact integer being the number of bits set to true.
@end defmethod


@defmethod @aclass{bitvector} first-bit-set
Return an exact integer being the offset of the first bit set to true;
if all the bits are set to false: return @math{-1}.
@end defmethod

@c page
@node bitvectors conv
@section Conversion operations on bitvectors


The following bindings are exported by the library @library{vicare containers
bitvectors}.


@defmethod @aclass{bitvector} list
@defmethodx @aclass{bitvector} vector
Return a list or vector filled with boolean values representing the bits
of the bitvector.  The boolean at index zero in the returned sequence
corresponds to the bit at index zero in the bitvector.
@end defmethod


@defun list->bitvector @var{ell}
@defunx vector->bitvector @var{vec}
Build and return a new @class{bitvector} object representing the values
in the list @var{ell} or vector @var{vec}.
@end defun

@c page
@node bitvectors comp
@section Comparison operations on bitvectors


The following bindings are exported by the library @library{vicare containers
bitvectors}.


@defmethod @aclass{bitvector} = (@var{B} @aclass{bitvector})
Return true if the instance and @var{B} are equal in length and bit by
bit.
@end defmethod

@c page
@node bitvectors ops
@section Other operations on bitvectors


The following bindings are exported by the library @library{vicare containers
bitvectors}.


@deftypemethod @aclass{bitvector} @aclass{bitvector} clone
Build and return a copy of this instance using newly allocated storage.
@end deftypemethod


@c end of file
@c Local Variables:
@c mode: texinfo
@c TeX-master: "vicare-libs"
@c End:
